syntax = "proto3";

package spot_instrument.v1;

option go_package = "github.com/anarakinson/go_stonks/stonks_pb/gen/spot_instrument/v1;spot_instrument";

import "market/v1/market.proto";
import "google/protobuf/descriptor.proto";

// Расширяем FieldOptions для добавления своей опции
extend google.protobuf.FieldOptions {
  uint32 max_items = 54321;  // Уникальный номер > 50000
}

// Запрос для получения списка рынков
message ViewMarketsRequest {
    market.v1.UserRole user_roles = 1;     // Роли пользователя для проверки доступа
    int32 page = 2;
}

// Ответ со списком доступных рынков
message ViewMarketsResponse {
    repeated market.v1.Market markets = 1 [(max_items) = 10];        // Массив рынков
}

// Сервис для работы с торговыми инструментами
service SpotInstrumentService {
    // RPC-метод для получения списка рынков
    rpc ViewMarkets(ViewMarketsRequest) returns (ViewMarketsResponse);
}

